import React from 'react'
import {
  InformationCircleIcon,
} from '@heroicons/react/24/outline'
import Tooltip from '../base/tooltip'
import AppIcon from '../base/app-icon'
import { randomString } from '@/utils'

export type IAppBasicProps = {
  iconType?: 'app' | 'api' | 'dataset' | 'webapp' | 'notion'
  icon?: string
  icon_background?: string
  name: string
  type: string | React.ReactNode
  hoverTip?: string
  textStyle?: { main?: string; extra?: string }
  isExtraInLine?: boolean
  mode?: string
}

const ApiSvg = <svg width="20" height="20" viewBox="0 0 35 35" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <title>切片</title>
  <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g id="工作流-数据" transform="translate(-858.000000, -219.000000)" fill="#5850EC" fill-rule="nonzero">
      <g id="编组-2备份" transform="translate(851.000000, 208.000000)">
        <g id="icon/line/聊天助手" transform="translate(7.000000, 11.000000)">
          <g id="_houduankaifa" transform="translate(6.000000, 6.000000)">
            <path d="M20.25,8.05500002 L17.0475,6.72750001 C16.7951812,6.62969855 16.5098525,6.67393677 16.2989946,6.84355055 C16.0881366,7.01316433 15.9837837,7.28238531 16.0252446,7.54980055 C16.0667054,7.81721579 16.2476812,8.04219855 16.5,8.14 L18.085,8.78250002 L16.5,9.51000001 C16.1226233,9.67658547 15.9506145,10.1166598 16.115,10.495 C16.2429538,10.7566247 16.5087619,10.9225122 16.8,10.9225 C16.9073142,10.9350589 17.0152231,10.9044847 17.1,10.8375 L20.25,9.38000002 C20.5131025,9.25607976 20.6828026,8.99328707 20.6875,8.70250002 C20.6933741,8.41583392 20.5181558,8.15651078 20.25,8.05500002 L20.25,8.05500002 Z M12.9825,5.05750002 C12.5926721,4.930133 12.1728272,5.13949862 12.04,5.52750001 L10.4125,10.495 C10.285133,10.8848279 10.4944986,11.3046728 10.8825,11.4375 C10.9497267,11.4686873 11.0234634,11.4832632 11.0975,11.48 C11.4220069,11.4607699 11.7058556,11.2549552 11.825,10.9525 L13.4525,5.98750002 C13.5719154,5.60150766 13.364097,5.19029257 12.9825,5.05750002 Z M7.97249999,7.155 C7.80508612,6.78504491 7.38577314,6.60071967 6.99999999,6.72750001 L3.7775,8.05500002 C3.50564356,8.17816966 3.32459861,8.44203303 3.30745858,8.74000001 C3.30443909,9.03210274 3.4712591,9.29940498 3.73499999,9.42500001 L6.90250001,10.88 C6.99588442,10.9279204 7.09785783,10.9568129 7.20249999,10.965 C7.49373812,10.965 7.7595462,10.7991247 7.88750001,10.5375 C8.05157735,10.1584786 7.87834454,9.71813205 7.49999999,9.55250002 L5.91500001,8.82500002 L7.49999999,8.1825 C7.92999999,7.96750001 8.14499998,7.54000002 7.97249999,7.155 Z M13.8125,19.5 L2.24999999,19.5 C1.83578643,19.5 1.49999999,19.8357865 1.49999999,20.25 C1.49999999,20.6642136 1.83578643,21 2.24999999,21 L13.8125,21 C14.2267136,21 14.5625,20.6642136 14.5625,20.25 C14.5625,19.8357865 14.2267136,19.5 13.8125,19.5 L13.8125,19.5 Z" id="形状"></path>
            <path d="M22.5,1.5 L22.5,15 L1.5,15 L1.5,1.5 L22.5,1.5 M22.5,0 L1.5,0 C0.671572877,0 0,0.671572877 0,1.5 L0,15 C0,15.8284271 0.671572877,16.5 1.5,16.5 L22.5,16.5 C23.3284271,16.5 24,15.8284271 24,15 L24,1.5 C24,0.671572877 23.3284271,0 22.5,0 Z M21.75,19.5 L18.235,19.5 C17.8207864,19.5 17.485,19.8357865 17.485,20.25 C17.485,20.6642136 17.8207864,21 18.235,21 L21.75,21 C22.1642136,21 22.5,20.6642136 22.5,20.25 C22.5,19.8357865 22.1642136,19.5 21.75,19.5 L21.75,19.5 Z" id="形状"></path>
            <path d="M16.0775,22.905 C14.611184,22.905 13.4225,21.716316 13.4225,20.25 C13.4225,18.783684 14.611184,17.595 16.0775,17.595 C17.543816,17.595 18.7325,18.783684 18.7325,20.25 C18.7297485,21.7151748 17.5426748,22.9022485 16.0775,22.905 L16.0775,22.905 Z M16.0775,19.0925 C15.4402641,19.0938808 14.9245428,19.6110943 14.9250027,20.2483315 C14.9254633,20.8855688 15.4419312,21.4020367 16.0791685,21.4024973 C16.7164057,21.4029572 17.2336192,20.8872359 17.235,20.25 C17.235,19.6107304 16.7167696,19.0925 16.0775,19.0925 L16.0775,19.0925 Z" id="形状"></path>
          </g>
        </g>
      </g>
    </g>
  </g>
</svg>

const DatasetSvg = <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fillRule="evenodd" clipRule="evenodd" d="M0.833497 5.13481C0.833483 4.69553 0.83347 4.31654 0.858973 4.0044C0.88589 3.67495 0.94532 3.34727 1.10598 3.03195C1.34567 2.56155 1.72812 2.17909 2.19852 1.93941C2.51384 1.77875 2.84152 1.71932 3.17097 1.6924C3.48312 1.6669 3.86209 1.66691 4.30137 1.66693L7.62238 1.66684C8.11701 1.66618 8.55199 1.66561 8.95195 1.80356C9.30227 1.92439 9.62134 2.12159 9.88607 2.38088C10.1883 2.67692 10.3823 3.06624 10.603 3.50894L11.3484 5.00008H14.3679C15.0387 5.00007 15.5924 5.00006 16.0434 5.03691C16.5118 5.07518 16.9424 5.15732 17.3468 5.36339C17.974 5.68297 18.4839 6.19291 18.8035 6.82011C19.0096 7.22456 19.0917 7.65515 19.13 8.12356C19.1668 8.57455 19.1668 9.12818 19.1668 9.79898V13.5345C19.1668 14.2053 19.1668 14.7589 19.13 15.2099C19.0917 15.6784 19.0096 16.1089 18.8035 16.5134C18.4839 17.1406 17.974 17.6505 17.3468 17.9701C16.9424 18.1762 16.5118 18.2583 16.0434 18.2966C15.5924 18.3334 15.0387 18.3334 14.3679 18.3334H5.63243C4.96163 18.3334 4.40797 18.3334 3.95698 18.2966C3.48856 18.2583 3.05798 18.1762 2.65353 17.9701C2.02632 17.6505 1.51639 17.1406 1.19681 16.5134C0.990734 16.1089 0.908597 15.6784 0.870326 15.2099C0.833478 14.7589 0.833487 14.2053 0.833497 13.5345V5.13481ZM7.51874 3.33359C8.17742 3.33359 8.30798 3.34447 8.4085 3.37914C8.52527 3.41942 8.63163 3.48515 8.71987 3.57158C8.79584 3.64598 8.86396 3.7579 9.15852 4.34704L9.48505 5.00008L2.50023 5.00008C2.50059 4.61259 2.50314 4.34771 2.5201 4.14012C2.5386 3.91374 2.57 3.82981 2.59099 3.7886C2.67089 3.6318 2.79837 3.50432 2.95517 3.42442C2.99638 3.40343 3.08031 3.37203 3.30669 3.35353C3.54281 3.33424 3.85304 3.33359 4.3335 3.33359H7.51874Z" fill="#444CE7" />
</svg>

const WebappSvg = <svg width="20" height="20" viewBox="0 0 35 34" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g id="工作流-数据" transform="translate(-91.000000, -218.000000)" fill="#F4AA3F" fill-rule="nonzero">
      <g id="编组-2" transform="translate(84.000000, 208.000000)">
        <g id="icon/line/聊天助手" transform="translate(7.705412, 10.000000)">
          <g id="exam_index12" transform="translate(2.914286, 4.857143)">
            <path d="M22.5320745,3.30188879 C20.2655455,1.11726575 17.301623,-0.0457709764 14.1633521,0.00137916121 C8.1087083,0.127112862 3.08430492,4.87356005 2.71975831,10.8301941 C2.57710963,12.9991004 3.05260522,15.1365733 4.08284566,17.0540123 L2.9258064,22.429128 L2.9258064,22.5077115 C2.9258064,22.9792129 3.30620287,23.356414 3.78169845,23.356414 L3.89264742,23.356414 L9.09139918,21.8947597 C10.8507329,22.7906123 12.8478143,23.2149636 14.8290459,23.1520967 C17.8722177,23.0420797 20.7093414,21.769026 22.8173718,19.5686863 C24.9412521,17.3683465 26.0824415,14.5079048 26.0507418,11.490296 C26.0507418,8.37838694 24.7827536,5.47079512 22.5320745,3.30188879 Z M14.7814964,21.5489921 C13.0221627,21.5961422 11.2786789,21.2189411 9.7253933,20.4173887 C9.67784374,20.3859553 9.66199389,20.3702386 9.63029418,20.3702386 L9.34499683,20.1816381 L4.81193889,21.4546918 L5.76293007,17.0540123 L5.76293007,16.7711114 L5.6836808,16.5982276 C5.6519811,16.5510775 5.63613125,16.4882106 5.58858169,16.4410605 L5.54103213,16.3624769 L5.52518227,16.3467602 C4.65344036,14.6807887 4.25719404,12.8419333 4.36814301,10.9559278 C4.68514007,5.83227951 8.99630006,1.74593425 14.2109017,1.63591727 C16.9212265,1.58876713 19.4730528,2.59463673 21.4067349,4.46492552 C23.3562668,6.33521431 24.418207,8.84988832 24.4499067,11.5217295 C24.4974562,16.849695 20.1704464,21.3446748 14.7814964,21.5489921 L14.7814964,21.5489921 Z" id="形状"></path>
            <path d="M19.4607522,12.5002413 C19.0549947,12.5002413 18.7272675,12.8040768 18.6648433,13.2038604 C18.5399949,15.4586398 16.7296923,17.2336789 14.5136323,17.2336789 C12.2975724,17.2336789 10.4872698,15.4586398 10.3624214,13.2038604 C10.3468153,12.7720941 10.0034821,12.4202845 9.56651251,12.4202845 C9.12954293,12.4202845 8.77060363,12.7880854 8.77060363,13.2358431 L8.77060363,13.2838171 C8.9266642,16.402129 11.4548453,18.8647959 14.5136323,18.8647959 C17.478783,18.8647959 19.960146,16.5300598 20.225449,13.5236872 C20.241055,13.4597219 20.241055,13.3797651 20.241055,13.2998084 C20.2566611,12.8520508 19.8977218,12.5002413 19.4607522,12.5002413 L19.4607522,12.5002413 Z M27.6539317,15.3467004 C27.5915075,15.3467004 27.5446894,15.3467004 27.4978712,15.330709 C27.0452955,15.234761 26.7487805,14.7870034 26.8268108,14.3232544 C26.9828713,13.5076959 27.0609016,12.676146 27.0609016,11.8445962 C27.0609016,10.9330896 26.9672653,10.021583 26.7799926,9.14205915 C26.6863563,8.67831019 26.9672653,8.21456123 27.435447,8.11861317 C27.8880226,8.02266511 28.3405982,8.31050929 28.4342346,8.79024959 C28.6371133,9.78171288 28.7463557,10.8211502 28.7463557,11.8445962 C28.7463557,12.7880854 28.6527193,13.7315747 28.4810527,14.6590726 C28.4030224,15.0588562 28.0440832,15.3467004 27.6539317,15.3467004 L27.6539317,15.3467004 Z M1.09242394,15.3467004 C0.702272533,15.3467004 0.343333238,15.0588562 0.265302957,14.6430813 C0.0936363377,13.7315747 0,12.7720941 0,11.8286048 C0,10.8051589 0.109242394,9.76572154 0.312121126,8.77425825 C0.405757464,8.31050929 0.858333096,8.00667377 1.31090873,8.10262183 C1.76348436,8.19856989 2.05999943,8.66231884 1.96636309,9.1260678 C1.77909042,10.0055917 1.68545408,10.9170983 1.68545408,11.8286048 C1.68545408,12.6601547 1.76348436,13.4917045 1.91954492,14.3072631 C2.01318126,14.771012 1.71666619,15.2187696 1.2484845,15.3147177 C1.20166633,15.3467004 1.15484817,15.3467004 1.09242394,15.3467004 L1.09242394,15.3467004 Z" id="形状"></path>
          </g>
        </g>
      </g>
    </g>
  </g>
</svg>

const NotionSvg = <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <g clipPath="url(#clip0_6294_13848)">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.287 21.9133L1.70748 18.6999C1.08685 17.9267 0.75 16.976 0.75 15.9974V4.36124C0.75 2.89548 1.92269 1.67923 3.43553 1.57594L15.3991 0.759137C16.2682 0.699797 17.1321 0.930818 17.8461 1.41353L22.0494 4.25543C22.8018 4.76414 23.25 5.59574 23.25 6.48319V19.7124C23.25 21.1468 22.0969 22.3345 20.6157 22.4256L7.3375 23.243C6.1555 23.3158 5.01299 22.8178 4.287 21.9133Z" fill="white" />
    <path d="M8.43607 10.1842V10.0318C8.43607 9.64564 8.74535 9.32537 9.14397 9.29876L12.0475 9.10491L16.0628 15.0178V9.82823L15.0293 9.69046V9.6181C15.0293 9.22739 15.3456 8.90501 15.7493 8.88433L18.3912 8.74899V9.12918C18.3912 9.30765 18.2585 9.46031 18.0766 9.49108L17.4408 9.59861V18.0029L16.6429 18.2773C15.9764 18.5065 15.2343 18.2611 14.8527 17.6853L10.9545 11.803V17.4173L12.1544 17.647L12.1377 17.7583C12.0853 18.1069 11.7843 18.3705 11.4202 18.3867L8.43607 18.5195C8.39662 18.1447 8.67758 17.8093 9.06518 17.7686L9.45771 17.7273V10.2416L8.43607 10.1842Z" fill="black" />
    <path fill-rule="evenodd" clip-rule="evenodd" d="M15.5062 2.22521L3.5426 3.04201C2.82599 3.09094 2.27051 3.66706 2.27051 4.36136V15.9975C2.27051 16.6499 2.49507 17.2837 2.90883 17.7992L5.48835 21.0126C5.90541 21.5322 6.56174 21.8183 7.24076 21.7765L20.519 20.9591C21.1995 20.9172 21.7293 20.3716 21.7293 19.7125V6.48332C21.7293 6.07557 21.5234 5.69348 21.1777 5.45975L16.9743 2.61784C16.546 2.32822 16.0277 2.1896 15.5062 2.22521ZM4.13585 4.54287C3.96946 4.41968 4.04865 4.16303 4.25768 4.14804L15.5866 3.33545C15.9476 3.30956 16.3063 3.40896 16.5982 3.61578L18.8713 5.22622C18.9576 5.28736 18.9171 5.41935 18.8102 5.42516L6.8129 6.07764C6.44983 6.09739 6.09144 5.99073 5.80276 5.77699L4.13585 4.54287ZM6.25018 8.12315C6.25018 7.7334 6.56506 7.41145 6.9677 7.38952L19.6523 6.69871C20.0447 6.67734 20.375 6.97912 20.375 7.35898V18.8141C20.375 19.2031 20.0613 19.5247 19.6594 19.5476L7.05516 20.2648C6.61845 20.2896 6.25018 19.954 6.25018 19.5312V8.12315Z" fill="black" />
  </g>
  <defs>
    <clipPath id="clip0_6294_13848">
      <rect width="24" height="24" fill="white" />
    </clipPath>
  </defs>
</svg>

const ICON_MAP = {
  app: <AppIcon className='border !border-[rgba(0,0,0,0.05)]' />,
  api: <AppIcon innerIcon={ApiSvg} className='border !bg-purple-50 !border-purple-200' />,
  dataset: <AppIcon innerIcon={DatasetSvg} className='!border-[0.5px] !border-indigo-100 !bg-indigo-25' />,
  webapp: <AppIcon innerIcon={WebappSvg} className='border !bg-primary-50 !border-primary-200 text-primary-500' />,
  notion: <AppIcon innerIcon={NotionSvg} className='!border-[0.5px] !border-indigo-100 !bg-white' />,
}

export default function AppBasic({ icon, icon_background, name, type, hoverTip, textStyle, mode = 'expand', iconType = 'app' }: IAppBasicProps) {
  return (
    <div className="flex items-start p-1">
      {icon && icon_background && iconType === 'app' && (
        <div className='flex-shrink-0 mr-3'>
          <AppIcon icon={icon} background={icon_background} />
        </div>
      )}
      {iconType !== 'app'
        && <div className='flex-shrink-0 mr-3'>
          {ICON_MAP[iconType]}
        </div>

      }
      {mode === 'expand' && <div className="group">
        <div className={`flex flex-row items-center text-sm font-semibold text-gray-700 group-hover:text-gray-900 break-all ${textStyle?.main ?? ''}`}>
          {name}
          {hoverTip
            && <Tooltip content={hoverTip} selector={`a${randomString(16)}`}>
              <InformationCircleIcon className='w-4 h-4 ml-1 text-gray-400' />
            </Tooltip>}
        </div>
        <div className={`text-xs font-normal text-gray-500 group-hover:text-gray-700 break-all ${textStyle?.extra ?? ''}`}>{type}</div>
      </div>}
    </div>
  )
}
